name: è‡ªåŠ¨æ–‡ä»¶åˆ†ç±»æ ‡ç­¾
version: "1.0.0"
description: æ ¹æ®æ–‡ä»¶è·¯å¾„å’Œå†…å®¹è‡ªåŠ¨ä¸ºé¡¹ç›®æ–‡ä»¶æ·»åŠ åˆ†ç±»æ ‡ç­¾
created_at: "2026-02-11"
category: project-mgmt
tags: ["label", "classification", "automation", "file-management"]
triggers:
  - "è‡ªåŠ¨åˆ†ç±»"
  - "æ·»åŠ æ ‡ç­¾"
  - "æ–‡ä»¶åˆ†ç±»"
  - "auto label"
steps:
  - id: 1
    name: æ‰«æé¡¹ç›®ç»“æ„
    action: run_command
    params:
      command: |
        echo "=== é¡¹ç›®æ–‡ä»¶ç»Ÿè®¡ ===" &&
        echo "Pythonæ–‡ä»¶: " && dir /s /b *.py 2>nul | find /c ".py" &&
        echo "JavaScriptæ–‡ä»¶: " && dir /s /b *.js *.ts *.jsx *.tsx 2>nul | find /c "." &&
        echo "æ–‡æ¡£æ–‡ä»¶: " && dir /s /b *.md *.txt *.rst 2>nul | find /c "." &&
        echo "é…ç½®æ–‡ä»¶: " && dir /s /b *.json *.yaml *.yml *.toml *.ini 2>nul | find /c "." &&
        echo "æµ‹è¯•æ–‡ä»¶: " && dir /s /b *test*.py *spec*.js 2>nul | find /c "."
      save_as: file_stats
      timeout: 15

  - id: 2
    name: åˆ†ææ ¸å¿ƒæ¨¡å—
    action: run_command
    params:
      command: |
        echo "=== æ ¸å¿ƒä»£ç ç›®å½• ===" &&
        dir src\*.py lib\*.py app\*.py 2>nul | findstr ".py" &&
        echo "=== æµ‹è¯•ç›®å½• ===" &&
        dir tests\*.py test\*.py 2>nul | findstr ".py"
      save_as: core_modules
      timeout: 10

  - id: 3
    name: æ£€æµ‹æŠ€æœ¯æ ˆ
    action: run_command
    params:
      command: |
        echo "=== æŠ€æœ¯æ ˆæ£€æµ‹ ===" &&
        if exist "requirements.txt" echo "Pythoné¡¹ç›® (requirements.txt)" &&
        if exist "package.json" echo "Node.jsé¡¹ç›® (package.json)" &&
        if exist "Cargo.toml" echo "Rusté¡¹ç›® (Cargo.toml)" &&
        if exist "pom.xml" echo "Java/Mavené¡¹ç›® (pom.xml)" &&
        if exist "go.mod" echo "Goé¡¹ç›® (go.mod)" &&
        if exist "Dockerfile" echo "å®¹å™¨åŒ–é¡¹ç›® (Dockerfile)" &&
        if exist ".github\workflows" echo "CI/CDé¡¹ç›® (GitHub Actions)"
      save_as: tech_stack
      timeout: 10

  - id: 4
    name: ç”Ÿæˆæ ‡ç­¾å»ºè®®
    action: run_command
    params:
      command: |
        echo "=== å»ºè®®æ ‡ç­¾ ===" &&
        echo "åŸºäºé¡¹ç›®ç»“æ„åˆ†æï¼Œå»ºè®®æ·»åŠ ä»¥ä¸‹æ ‡ç­¾:" &&
        echo "" &&
        if exist "tests" echo "ğŸ·ï¸ has-tests (åŒ…å«æµ‹è¯•)" &&
        if exist "docs" echo "ğŸ·ï¸ has-docs (åŒ…å«æ–‡æ¡£)" &&
        if exist ".github" echo "ğŸ·ï¸ has-ci (åŒ…å«CI/CD)" &&
        if exist "Dockerfile" echo "ğŸ·ï¸ containerized (å®¹å™¨åŒ–)" &&
        if exist "README.md" echo "ğŸ·ï¸ documented (å·²æ–‡æ¡£åŒ–)" &&
        dir *.py 2>nul && echo "ğŸ·ï¸ python (Pythoné¡¹ç›®)" ||
        dir *.js 2>nul && echo "ğŸ·ï¸ javascript (JavaScripté¡¹ç›®)"
      save_as: label_suggestions
      timeout: 10

  - id: 5
    name: åˆ›å»ºæ ‡ç­¾é…ç½®æ–‡ä»¶
    action: run_command
    params:
      command: |
        echo "# é¡¹ç›®è‡ªåŠ¨åˆ†ç±»æ ‡ç­¾" > .project-labels.yaml &&
        echo "# ç”Ÿæˆæ—¶é—´: {{current_date}}" >> .project-labels.yaml &&
        echo "" >> .project-labels.yaml &&
        echo "labels:" >> .project-labels.yaml &&
        echo "  - name: auto-detected" >> .project-labels.yaml &&
        echo "    color: blue" >> .project-labels.yaml &&
        echo "    description: è‡ªåŠ¨æ£€æµ‹çš„æ ‡ç­¾" >> .project-labels.yaml &&
        echo "" >> .project-labels.yaml &&
        echo "classifications:" >> .project-labels.yaml &&
        echo "  {{label_suggestions}}" >> .project-labels.yaml &&
        echo "" >> .project-labels.yaml &&
        echo "file_patterns:" >> .project-labels.yaml &&
        echo "  src/*.py: core" >> .project-labels.yaml &&
        echo "  tests/*.py: test" >> .project-labels.yaml &&
        echo "  docs/*.md: documentation" >> .project-labels.yaml &&
        type .project-labels.yaml
      save_as: label_config
      timeout: 10

  - id: 6
    name: ç”Ÿæˆåˆ†ç±»æŠ¥å‘Š
    action: generate_document
    params:
      template: "label-report.md"
      variables:
        file_stats: "{{file_stats}}"
        core_modules: "{{core_modules}}"
        tech_stack: "{{tech_stack}}"
        label_suggestions: "{{label_suggestions}}"
        label_config: "{{label_config}}"
        date: "{{current_date}}"
      output: "docs/auto-labels-{{current_date}}.md"
      save_as: report_file

  - id: 7
    name: è¾“å‡ºåˆ†ç±»ç»“æœ
    action: notify
    params:
      message: |
        æ–‡ä»¶è‡ªåŠ¨åˆ†ç±»å®Œæˆï¼
        
        é¡¹ç›®ç»Ÿè®¡:
        {{file_stats}}
        
        æŠ€æœ¯æ ˆ:
        {{tech_stack}}
        
        æ ‡ç­¾å»ºè®®:
        {{label_suggestions}}
        
        é…ç½®æ–‡ä»¶å·²åˆ›å»º: .project-labels.yaml
        å®Œæ•´æŠ¥å‘Š: {{report_file}}