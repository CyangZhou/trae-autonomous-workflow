# Agent 执行核心指令 v9.3 (优化版)

---

## 🎯 快速理解：什么是自动化工作流

**一句话定义**：
> 自动化工作流 = 触发词 → 自主执行 → 闭环交付

**核心价值**：
- 用户只需说一句话，Agent 自动完成从需求到交付的全流程
- 无需人工干预，自动规划、执行、验证、交付
- 错误自动修复，成功自动沉淀为可复用记忆

---

## 📁 项目架构全景图

```
.trae/
├── 🎯 核心引擎
│   └── autonomous-agent/        # 自主执行总调度器 v9.1
│       └── agent.py             # 【入口文件】一切从这里开始
│       └── core/
│           ├── token_tracker.py # Token计数模块 v2.0
│           ├── swarm.py         # 蜂群编排器 v2.5
│           └── reflexion.py     # 反思模块 v2.3
│
├── 🔧 技能系统 (.trae/skills/)
│   ├── feishu-doc-master/       # 飞书文档大师 v2.1
│   ├── neuro-bridge/            # 本地系统控制桥接器
│   ├── skill-manager/           # 技能管理器
│   └── workflow-market/         # 工作流市场
│
├── 📋 工作流系统
│   ├── workflow_manager_v2.py   # 自验证闭环工作流管理器
│   └── *.yaml                   # 50+ 预定义工作流模板
│
└── 🐝 蜂群系统
    └── swarm/                   # 多智能体编排
```

---

## 🚨🚨🚨 超级强制规则 (最高优先级)

### 1. ⚡ 强制触发协议 (MANDATORY TRIGGER PROTOCOL)

**检测到以下任意触发词时，必须立即执行 autonomous-agent 技能，无例外：**

| 触发词 | 立即动作 | 绝对禁止 |
|:---:|:---|:---|
| **开始** | 调用 `autonomous-agent` 技能 | 闲聊、解释、计划 |
| **继续** | 调用 `autonomous-agent` 技能 | 等待更多上下文 |
| **自主执行** | 调用 `autonomous-agent` 技能 | 询问确认 |
| **蜂群** | 调用 `autonomous-agent` 技能 | - |

### 2. 🔄 强制连续执行协议

| 规则 | 描述 | 违规后果 |
|:---:|:---|:---|
| **禁止中途停止** | 必须一口气执行完所有步骤 | 执行失败 |
| **禁止伪并行** | Swarm 模式在一条消息中发起所有 Task | 执行失败 |
| **禁止等待确认** | 默认不需要确认，直接执行 | 执行失败 |

### 3. ✅ 强制检查点

```
[检查点1] ✅ 初始化完成
[检查点2] ✅ 任务解析完成
[检查点3] ✅ 场景/技能决策
[检查点4] ✅ 执行与编排
[检查点5] ✅ 质量与验证
[检查点6] ✅ 交付与记忆
```

---

## 🚦 决策与执行标准

### 5场景决策树

| 场景 | 复杂度 | 策略 | 需确认 |
|:---:|:---:|:---|:---:|
| **提示增强** | 1-2 | 单步直接执行 | 否 |
| **Skill复用** | 3-5 | 调用现有Skill | 否 |
| **计划+评审** | 3-5 | 规划 → 执行 → Review | 否 |
| **Lead-Member** | 6-10 | Leader分配 → Member并行 | 是 |
| **复合编排** | 6-10 | 多组Agent协作 | 是 |

---

## 🤖 智能体映射推荐

| 任务类型 | 推荐智能体 |
|:---|:---|
| **Web开发** | `search`, `frontend-implementation-expert` |
| **API/后端** | `architect-design-expert`, `backend-architect` |
| **数据/量化** | `alpha-picker`, `factor-validator` |
| **技能开发** | `trae-skill-forge` |
